<!-- static/html/pdf_display.html -->
<div class="pdf-display-xblock" aria-live="polite">
    <div class="pdf-header">
        <h3 id="pdf-display-title">{{ pdf_title }}</h3>
        <div class="pdf-controls" role="group" aria-label="PDF controls">
            {% if show_download_button and pdf_url %}
            <a href="{{ pdf_url }}" download target="_blank" class="btn btn-primary" aria-label="Download PDF">
                Download PDF
            </a>
            {% endif %}
            <!-- New: button to list packaged / available PDFs -->
            <button type="button" id="list-pdfs-btn" class="btn btn-primary" aria-controls="pdf-select">
                Show available PDFs
            </button>
        </div>
    </div>

    {% if available_pdfs %}
    <div class="pdf-selector" role="region" aria-labelledby="pdf-display-title">
        <label for="pdf-select">Choose PDF:</label>
        <select id="pdf-select" class="pdf-select" aria-label="Choose PDF">
            <option value="">Select a PDF...</option>
            {% for pdf in available_pdfs %}
            <option value="{{ pdf.path }}" {% if pdf.path == current_pdf_file %}selected{% endif %}>
                {{ pdf.name }} ({{ pdf.size }})
            </option>
            {% endfor %}
        </select>
    </div>
    {% else %}
    <!-- keep selector area (will be populated dynamically) -->
    <div class="pdf-selector" role="region" aria-labelledby="pdf-display-title" id="dynamic-pdf-list" style="display:none;">
        <label for="pdf-select">Choose PDF:</label>
        <select id="pdf-select" class="pdf-select" aria-label="Choose PDF">
            <option value="">Select a PDF...</option>
        </select>
    </div>
    {% endif %}

    <div class="pdf-content" id="pdf-content">
        {% if pdf_url %}
        <div class="iframe-wrap" style="position: relative;">
            <div class="loading-overlay hidden" id="iframe-loading">Loadingâ€¦</div>
            <iframe id="pdf-iframe" 
                    src="{{ pdf_url }}"
                    width="{{ width }}"
                    height="{{ height }}"
                    style="border: 1px solid #ccc; display: block;"
                    title="{{ pdf_title }}"
                    aria-label="{{ pdf_title }}">
                <p>Your browser does not support PDFs.
                   <a href="{{ pdf_url }}" target="_blank">Download the PDF</a>.
                </p>
            </iframe>
        </div>
        {% else %}
        <div class="alert alert-warning">
            <strong>No PDF selected.</strong><br>
            Please select a PDF from the list above.
        </div>
        {% endif %}
    </div>
</div>
